<!DOCTYPE html>
<html lang="en">
  <head>
      <title>SMART Developers Documentation</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/assets/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="/assets/css/syntax.css" rel="stylesheet">
    <link href="/assets/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/assets/css/smart-docs.css" rel="stylesheet" media="screen">
    <style type="text/css"> body { padding-top: 60px; } </style>

    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script>
        // highlight the <li> in the topbar
        $(function(){
            $('#ref-topbar ul.nav').removeClass('active')
            $('#ref-topbar ul.nav #tn_appdev').addClass('active')
        });
    </script>
  </head>

  <body data-spy='scroll' data-target='#ref-sidebar' data-offset='80'>

    <div id='ref-topbar' class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container-fluid">

      <a class="brand" href="/"><img class='smartbug' src='/assets/img/smart-bug.png' /></a>

      <ul class="nav" style='text-transform: uppercase; font-size: 14px'>
        <li id="tn_home"><a href="/classic.html">Home</a></li>

        <li id="tn_framework"><a href="/framework/architecture">Framework</a></li>

        <li id="tn_models"><a href="/framework/models/">Data Models</a></li>
        <li id="tn_api"><a href="/framework/api/">API</a></li>

        <li id="tn_appdev"><a href="/guide/">App Development</a></li>
        <li id="tn_containerdev"><a href="/container/">Container Development</a></li>

        <li id="tn_resources"><a href="/resources.html">Resources</a></li>
      </ul>

    </div>
  </div>
</div>

<div class='red_box'>SMART "Classic" is being transitioned to support-only mode as we continue new development on SMART-on-FHIR. <a href="http://fhir-docs.smartplatforms.org">Click here</a> to see the SMART-on-FHIR docs</div>


    <div class="container-fluid">
      <div class="row-fluid">
        <div id='ref-sidebar' class="span3">
            <div id='ref-sidebar-inner'
                class='ref-sidenav well'
                data-spy='affix'
                style='height: auto; padding: 0px 0px 20px 0px; margin-top: 30px; font-family: roboto'>
            <ul class="nav nav-list">



<li class='nav-header'>App Development Guide</li>

<li class='nav-type'><a href='/guide/setup.html'>Setup</a></li>

<li class='nav-type'><a href='/guide/quickstart.html'>Quickstart Example</a></li>

<li class='nav-type'><a href='/guide/nextsteps.html'>Next Steps</a></li>


<li class='nav-header'>Extended Tutorials</li>

<li class='nav-type'><a href='/guide/tutorials/smart_connect.html'>Using SMART Connect</a></li>
<li class='nav-type'><a href='/guide/tutorials/smart_rest.html'>Using SMART REST</a></li>
<li class='nav-type'><a href='/guide/tutorials/smart_frame.html'>SMART Frame Apps</a></li>


<li class='nav-header'>Client Libraries</li>

<li class='nav-type'><a href='/guide/client-libs/client-js.html'>JavaScript</a></li>

<li class='nav-type'><a href='/guide/client-libs/client-python.html'>Python</a></li>

<li class='nav-type'><a href='/guide/client-libs/client-ios.html'>iOS</a></li>

<li class='nav-type'><a href='/guide/client-libs/client-java.html'>Java</a></li>

<li class='nav-type'><a href='/guide/client-libs/client-dotnet.html'>.NET</a></li>


            </ul>
          </div>
        </div><!--span3-->

        <div class="span8">
          <h1>Quickstart Example</h1>

<p>Your app needs to serve, at a minimum, the following URL:</p>

<ul>
<li><a href="http://localhost:8000/smartapp/index.html">http://localhost:8000/smartapp/index.html</a></li>
</ul>

<p>For this tutorial we simply use <a href="http://webpy.org">web.py</a> to serve the static
<code>index.html</code> file.  In a real system you would typically use a webserver such as
Apache to serve static files, but <code>web.py&#39;s</code> built-in webserver works fine for
demonstration purposes.</p>

<h2>Install Python and web.py</h2>

<p>Depending on your environment you may need to install Python and web.py.  Follow
the <a href="http://webpy.org/install">install web.py guide</a> if you need to do this.</p>

<h2>web.py Server Script</h2>

<div class="highlight"><pre><code class="python"><span class="kn">import</span> <span class="nn">web</span>

<span class="n">urls</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">&#39;/smartapp/index.html&#39;</span><span class="p">,</span> <span class="s">&#39;index&#39;</span>
<span class="p">)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">application</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="nb">globals</span><span class="p">())</span>

<span class="k">class</span> <span class="nc">index</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">GET</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;index.html&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">data</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>

<p>Save this script in file named <code>app.py</code> and then run it with <code>python app.py
8000</code>. It will launch a web.py&#39;s simple webserver responding to the
<code>http://localhost:8000/smartapp/index.html</code> URL by serving the content of the
<code>index.html</code> file stored in the same directory as the script. All you then need
to do is create an <code>index.html</code> file in the same directory and put the content
of your first SMART Connect app in it.</p>

<h2>Your First <code>index.html</code> file</h2>

<p>The index file, served at <a href="http://localhost:8000/smartapp/index.html">http://localhost:8000/smartapp/index.html</a>, is where
all the fun happens! The first thing you need to do is to include the SMART
Javascript client library script like this:</p>

<div class="highlight"><pre><code class="html">    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://sample-apps.smartplatforms.org/framework/smart/scripts/smart-api-client.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div>

<p>This script serves to connect your HTML page to the SMART JS library.</p>

<p>Once the client-side library has loaded, your index HTML page has access to a
SMART JS object that provides some basic context including:</p>

<ul>
  <li><b>SMART.user</b>: which provides the name and ID of the user who
  launched the app, typically the physician logged into the SMART EMR.</li>

  <li><b>SMART.record</b>: which provides the name and ID of the patient whose
  record is currently loaded.</li>
</ul>

<p>For a complete reference of the app context, see the <a href="/guide/client-libs/client-js.html">JS Library
reference</a></p>

<p>Here is an <code>index.html</code> file that fetches the name of the current patient and
give a friendly greeting. Copy this into your <code>index.html</code> file and try to
run it from <code>MyApp</code> in the developer sandbox.</p>

<div class="highlight"><pre><code class="html">    <span class="cp">&lt;!DOCTYPE html&gt;</span>
    <span class="nt">&lt;html&gt;</span>
     <span class="nt">&lt;head&gt;</span>
      <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://sample-apps.smartplatforms.org/framework/smart/scripts/smart-api-client.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
     <span class="nt">&lt;/head&gt;</span>
     <span class="nt">&lt;body&gt;&lt;h1&gt;</span>Hello <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;&lt;/span&gt;&lt;/h1&gt;</span>

     <span class="nt">&lt;script&gt;</span>
       <span class="nx">SMART</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
         <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">SMART</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">full_name</span><span class="p">;</span>
       <span class="p">});</span>
     <span class="nt">&lt;/script&gt;</span>
     <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/html&gt;</span>
</code></pre></div>

<p>If you can see the name of the current patient in the body of your app,
congratulations, you have just written your first SMART app!</p>

<h2>Using the SMART API</h2>

<p>At this point your SMART app is ready to make API calls to obtain health data.
Remember your app is contained in an IFRAME meant to access single, specific
medical record. This means you can request medical data without specifying the
patient context because the medical record has already determined by the
Javascript context.</p>

<h3>Asynchronous Calls</h3>

<p>Let&#39;s load the patient&#39;s medications using <code>SMART.get_medications()</code>. The most
important thing you need to know about all SMART Javascript APIs is that they
are asynchronous: you won&#39;t get the meds as a result of the
<code>SMART.get_medications()</code> call. Instead, you need to specify callback functions
that will be invoked when the results are ready:</p>

<div class="highlight"><pre><code class="javascript">    <span class="nx">SMART</span><span class="p">.</span><span class="nx">get_medications</span><span class="p">().</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">meds</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// do something with those meds</span>
    <span class="p">}).</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// handle any errors</span>
    <span class="p">});</span>
</code></pre></div>

<p>Why is the API designed this way? Because typically the SMART container will
need to make a call to a server to get the requested data which could take some
time. It would be less than ideal if your app was forced to freeze for a couple
of seconds while waiting for the data to be returned. Instead, your app gets
back control from the SMART library call immediately and is free to display a
pretty progress bar or make additional calls to obtain more data in parallel.</p>

<h3>Data in RDF Form</h3>

<p>When data becomes available the SMART framework calls your callback function,
passing it the returned medications as a parameter. The results are in the form
of an SMARTResponse object containing the RDF graph of the data. RDF (Resource
Description Framework) is a standard and flexible approach to modeling all kinds
of data in a graph structure. If you haven&#39;t used RDF, read our <a href="/framework/rdf-sparql-intro.html">Quick
Introduction to RDF and SPARQL</a> for a brief
primer.</p>

<p>Simply stated, a SMART medication list is an RDF graph that can be easily
navigated and queried. For example, if <code>meds</code> is an RDF graph, then:</p>

<div class="highlight"><pre><code class="javascript">  <span class="nx">meds</span><span class="p">.</span><span class="nx">graph</span><span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="s2">&quot;?medication rdf:type sp:Medication&quot;</span><span class="p">)</span>
</code></pre></div>

<p>selects all of &quot;objects&quot; in the graph that have a <code>datatype sp:Medication</code>,
where <code>sp</code> stands for
<a href="http://smartplatforms.org/ns#">http://smartplatforms.org/ns#</a> which is the
location of the SMART vocabulary.</p>

<p>Of course, you want more than just the raw &quot;objects&quot;: you want their properties.
In particular you want the name of the drug. The following selects the drug
names, which are coded values, and then the value of those coded values which
are the actual drug name strings:</p>

<div class="highlight"><pre><code class="javascript">    <span class="nx">meds</span><span class="p">.</span><span class="nx">graph</span>
        <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="s2">&quot;?medication rdf:type sp:Medication&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="s2">&quot;?medication sp:drugName ?drug_name_code&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="s2">&quot;?drug_name_code dcterms:title ?drugname&quot;</span><span class="p">);</span>
</code></pre></div>

<p>This is effectively a JavaScript query on the RDF graph, and it returns a set of
JavaScript objects with properties you&#39;re interested in, in particular
<code>drugname</code>. You can then iterate over the list of returned objects and extract
the <code>drugname</code> property for each one:</p>

<div class="highlight"><pre><code class="javascript">    <span class="kd">var</span> <span class="nx">med_names</span> <span class="o">=</span> <span class="nx">meds</span><span class="p">.</span><span class="nx">graph</span>
             <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="s2">&quot;?medication rdf:type sp:Medication&quot;</span><span class="p">)</span>
             <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="s2">&quot;?medication sp:drugName ?drug_name_code&quot;</span><span class="p">)</span>
             <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="s2">&quot;?drug_name_code dcterms:title ?drugname&quot;</span><span class="p">);</span>

         <span class="nx">med_names</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">single_med</span><span class="p">)</span> <span class="p">{</span>
             <span class="c1">// do something with single_med.drugname</span>
           <span class="p">});</span>
</code></pre></div>

<h2>The Complete App</h2>

<p>To display the patient&#39;s medications you first set up an HTML unorderd list
&lt;ul&gt;, and then you append list items (&lt;li&gt;s) to it with the name of
each drug:</p>

<div class="highlight"><pre><code class="html">    <span class="cp">&lt;!DOCTYPE html&gt;</span>
    <span class="nt">&lt;html&gt;</span>
     <span class="nt">&lt;head&gt;</span>
      <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://sample-apps.smartplatforms.org/framework/smart/scripts/smart-api-client.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
     <span class="nt">&lt;/head&gt;</span>
     <span class="nt">&lt;body&gt;&lt;h1&gt;</span>Hello <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;&lt;/span&gt;&lt;/h1&gt;</span>

     <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;med_list&quot;</span><span class="nt">&gt;&lt;/ul&gt;</span>

     <span class="nt">&lt;script&gt;</span>
       <span class="nx">SMART</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
         <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">SMART</span><span class="p">.</span><span class="nx">record</span><span class="p">.</span><span class="nx">full_name</span><span class="p">;</span>
         <span class="nx">SMART</span><span class="p">.</span><span class="nx">get_medications</span><span class="p">().</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">meds</span><span class="p">)</span> <span class="p">{</span>
           <span class="kd">var</span> <span class="nx">med_names</span> <span class="o">=</span> <span class="nx">meds</span><span class="p">.</span><span class="nx">graph</span>
             <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="s2">&quot;?medication rdf:type sp:Medication&quot;</span><span class="p">)</span>
             <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="s2">&quot;?medication sp:drugName ?drug_name_code&quot;</span><span class="p">)</span>
             <span class="p">.</span><span class="nx">where</span><span class="p">(</span><span class="s2">&quot;?drug_name_code dcterms:title ?drugname&quot;</span><span class="p">);</span>

           <span class="kd">var</span> <span class="nx">med_list</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;med_list&#39;</span><span class="p">);</span>
           <span class="nx">med_names</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">single_med</span><span class="p">)</span> <span class="p">{</span>
             <span class="nx">med_list</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="s2">&quot;&lt;li&gt; &quot;</span> <span class="o">+</span> <span class="nx">single_med</span><span class="p">.</span><span class="nx">drugname</span> <span class="o">+</span> <span class="s2">&quot;&lt;/li&gt;&quot;</span><span class="p">;</span>
           <span class="p">});</span>
         <span class="p">}).</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">alert</span> <span class="p">(</span><span class="s2">&quot;An error has occurred&quot;</span><span class="p">);</span> <span class="p">});</span>
       <span class="p">});</span>
     <span class="nt">&lt;/script&gt;</span>
     <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/html&gt;</span>
</code></pre></div>

<p>And that&#39;s it! In a few lines of HTML and JavaScript code, you have an app that
can request the medications from the current record and display them.</p>

<p>Go to <a href="/guide/nextsteps.html">next steps</a></p>

        </div><!--span8-->

        <div class="span1">
            <!-- empty column for right margin -->
            &nbsp;
        </div><!--span1-->
      </div><!--row-->

    
<hr>

<div class='footer-row'>
    <img class='smartbug' src='/assets/img/smart-bug.png' style='height: 20px; width: 22px; padding-right: 4px;'>
    <a href='http://smartplatforms.org'>SMARTPlatforms.org</a> &copy; 2014
</div>


    </div><!--/.fluid-container-->
  </body>
</html>

